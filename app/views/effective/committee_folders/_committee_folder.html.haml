= render('layout') do
  - committee = committee_folder.committee

  %nav{'aria-label': 'breadcrumb'}
    %ol.breadcrumb
      %li.breadcrumb-item= link_to("My Dashboard", return_to_dashboard_path)
      %li.breadcrumb-item= link_to("My #{committees_label}", effective_committees.committees_path)
      %li.breadcrumb-item= link_to(committee, effective_committees.committee_path(committee))

      - committee_folder.parents.each do |parent|
        %li.breadcrumb-item= link_to(parent.title, effective_committees.committee_committee_folder_path(committee, parent))

      %li.breadcrumb-item.active{'aria-current': 'page'}= committee_folder.title

  .effective-committee-folder
    %h1= committee_folder.title

    - if committee_folder.rich_text_body.present?
      .mb-4= committee_folder.rich_text_body.to_s

    .my-4

    - if committee_folder.committee_folders.present?
      %h3 Folders
      .card
        .list-group.list-group-flush
          - committee_folder.committee_folders.each do |committee_folder|
            = link_to(committee_folder.title, effective_committees.committee_committee_folder_path(committee, committee_folder), class: 'list-group-item list-group-action')

    %h3 Files
    .card
      .card-body
        - if committee_folder.committee_files.present?
          %table.table.table-sm.table-striped
            %thead
              %tr
                %th
                %th File
                %th.d-none.d-lg-table-cell Date
                %th.d-none.d-lg-table-cell Size
                %th.d-none.d-lg-table-cell Note

            - committee_folder.committee_files.each_with_index do |file, index|
              %tr
                %td= index+1
                %td
                  - if file.file.attached?
                    = link_to(file.to_s, url_for(file.file), target: '_blank')
                  - else
                    = file.to_s

                %td.d-none.d-lg-table-cell= file.created_at.strftime('%F')
                %td.d-none.d-lg-table-cell= number_to_human_size(file.file.byte_size)
                %td.d-none.d-lg-table-cell= file.notes
        - else
          %p No files.
