= effective_form_with(model: [:admin, committee_file], engine: true) do |f|
  - f.object.committee_type ||= Effective::Committee.name

  = f.hidden_field :committee_type
  = f.hidden_field :committee_id

  - if inline_datatable? && inline_datatable.attributes[:committee_folder_id].present?
    = f.hidden_field :committee_folder_id
  - elsif f.object.persisted?
    = f.static_field :committee
    = f.select :committee_folder_id, Effective::CommitteeFolder.where(committee: f.object.committee), label: "Folder"
  - else
    = f.select :committee_id, Effective::Committee.sorted.all,
      'data-load-ajax-url': effective_committees.new_admin_committee_file_path,
      'data-load-ajax-div': '#effective-committees-ajax'

    #effective-committees-ajax
      = f.select :committee_folder_id, Effective::CommitteeFolder.where(committee: f.object.committee), label: "Folder"

  = f.file_field :file
  = f.text_area :notes

  = effective_submit(f)
